# Twitch Discord Bot
This Discord bot will automatically send a message and tag the assigned role whenever a streamer went live.
The notifications will update every 10 minutes(default) while the streamer is live.

## How does it work?
This Discord bot uses [The Official Twitch Api](https://dev.twitch.tv/docs/api/). You are able to assign unlimited streamers to the bot. The bot uses the api to fetch the channel data to see if the streamer is live. If the streamer is live it will send a message in the assigned channel and it will also tag the assigned role. You will be able to choose the update time. If the streamer is still live the bot will update the message after X amount of time (default 10 minutes). 


# Installation
First you will have to clone the project.
```console
$ git clone https://github.com/FearlessKenji/KenjiB0t
```

## Dependencies
In order for the bot to work properly you will have to install the required node packages outlined in packages.json. Use the following command to install the dependencies.
```console
$ npm install
```

## Edit blank_config.json
- Rename to config.json
- token - Enter your [Discord bot token](https://discord.com/developers/applications) here.
- twitchClientId - Enter the Twitch application client ID here ([Twitch Developer Console](https://dev.twitch.tv/console/apps)).
- twitchSecret - Generate a api token on the Twitch application page.
- authToken - Autogenerated auth key for getting twitch usernames. Leave alone.
- botOwner - Copy and paste your discord ID for top access commands.
- clientId - Copy and paste your application ID. You need this to register commands.
- guildID - Copy and paste your Discord server ID here. This is for private guild-access commands.
- cron - Enter your update/check interval here ([Cron Guru](https://crontab.guru/)).

NOTE: Do NOT add anything in the fields that are already empty. These fields will automatically update.
Some of values in the config.json template have "(NOT REQUIRED)" in it. If you are not using this replace it with an empty string.
```"DISCORD_SERVER_INVITE_URL(NOT REQUIRED)" --> ""```

## Add streamers
Use the 'channels' slash command to add users to the database. Something similar to this:
```console
/channels add name: FearlessKenji discord: https://discord.gg/FearlessKenji
```
- name - Enter the streamer login name here. This name is the same as the name in the channel URL.  
Example: 
URL = https://www.twitch.tv/fearlesskenji  
name = fearlesskenji
- discord - This field is not required but if the Streamer has their own Discord server you could add the invite url here. 
  
There should be feedback on whether or not the addition was successfull..

There is also a /channels delete command that deletes entries from the database. 

## Run the bot
After you updated the config.json and installed the dependencies you can run the final command.
Use the command in the same directory as the index.js file.
```console
$ node index.js
```
or
```console
$ npm run start
```

Congratulations! You have successfully setup the bot.